<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Ryana - Offline-first code snippet and error manager for IT students">
  <meta name="theme-color" content="#16213e">
  
  <title>Ryana - Your Second Mind for Code</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="./manifest.json">
  
  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="96x96" href="./assets/icons/favicon-32x32.png"  />
  <link rel="icon" type="image/png" sizes="192x192" href="./assets/icons/icon-192x192.png">
  <link rel="apple-touch-icon" href="./assets/icons/icon-192x192.png">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="./lib/prism.css">
  <link rel="stylesheet" href="./css/themes.css">
  <link rel="stylesheet" href="./css/main.css">
</head>
<body>
  <!-- Loading Screen (shown while app initializes) -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <h1>Ryana</h1>
      <p>Your second mind for code</p>
      <div class="spinner"></div>
    </div>
  </div>

  <!-- Main App Container -->
  <div id="app" class="app-container" style="display: none;">
    
    <!-- Header / Navigation -->
    <header class="app-header">
      <div class="header-left">
        <h1 class="app-title">Ryana</h1>
        <p class="app-tagline">Your second mind for code</p>
      </div>
      
      <div class="header-right">
        <!-- Theme Toggle -->
        <button id="theme-toggle" class="icon-btn" title="Toggle Theme" aria-label="Toggle dark/light theme">
          <span class="theme-icon">üåô</span>
        </button>
        
        <!-- Settings -->
        <button id="settings-btn" class="icon-btn" title="Settings" aria-label="Open settings">
          <span>‚öôÔ∏è</span>
        </button>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="app-main">
      
      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <nav class="sidebar-nav">
          <!-- NEW: Home View -->
          <button class="nav-btn active" data-view="home">
            <span class="nav-icon" id="icon-home">üè†</span>
            <span class="nav-label">Home</span>
          </button>
          
          <!-- UPDATED: "All Snippets" ‚Üí "Snippets" -->
          <button class="nav-btn" data-view="snippets">
            <span class="nav-icon" id="icon-snippets">üìö</span>
            <span class="nav-label">Snippets</span>
          </button>
          
          <!-- UPDATED: "Favorites" ‚Üí "Favourites" (British English) -->
          <button class="nav-btn" data-view="favourites">
            <span class="nav-icon" id="icon-favourites">‚≠ê</span>
            <span class="nav-label">Favourites</span>
          </button>
          
          <button class="nav-btn" data-view="errors">
            <span class="nav-icon" id="icon-errors">üêõ</span>
            <span class="nav-label">Error Logs</span>
          </button>
          
          <button class="nav-btn" data-view="subjects">
            <span class="nav-icon" id="icon-subjects">üé®</span>
            <span class="nav-label">Subjects</span>
          </button>
          
          <hr class="nav-divider">
          
          <button class="nav-btn" data-view="import-export">
            <span class="nav-icon" id="icon-import-export">üíæ</span>
            <span class="nav-label">Import/Export</span>
          </button>
        </nav>
        
        <!-- Quick Actions -->
        <div class="quick-actions">
          <button id="new-snippet-btn" class="btn btn-primary">
            <span>+ New Snippet</span>
          </button>
          
          <button id="new-error-btn" class="btn btn-secondary">
            <span>+ Log Error</span>
          </button>
        </div>
      </aside>

      <!-- Content Views (Different pages will be shown/hidden here) -->
      <section class="content-area">
        
        <!-- Search Bar (appears on all views) -->
        <div class="search-container">
          <input 
            type="text" 
            id="search-input" 
            class="search-input" 
            placeholder="Search snippets, tags, subjects... (Ctrl+K)"
            autocomplete="off"
          >
          <button id="clear-search" class="clear-search-btn" style="display: none;">‚úï</button>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar">
          <select id="language-filter" class="filter-select">
            <option value="">All Languages</option>
            <!-- Populated dynamically -->
          </select>
          
          <select id="subject-filter" class="filter-select">
            <option value="">All Subjects</option>
            <!-- Populated dynamically -->
          </select>
          
          <select id="sort-by" class="filter-select">
            <option value="updated">Recently Updated</option>
            <option value="created">Recently Created</option>
            <option value="title">Title A-Z</option>
            <option value="copied">Most Copied</option>
            <option value="viewed">Most Viewed</option>
          </select>
        </div>

        <!-- NEW: Home View (Shows ALL content) -->
        <div id="view-home" class="view active">
          <div class="view-header">
            <h2>All Content</h2>
            <span id="home-count" class="count-badge">0</span>
          </div>
          
          <div id="home-grid" class="snippets-grid">
            <!-- ALL snippets and errors will be rendered here -->
            <div class="empty-state">
              <p>No content yet. Create your first snippet or log an error!</p>
            </div>
          </div>
        </div>

        <!-- UPDATED: "All Snippets" ‚Üí "Snippets" View (Code only) -->
        <div id="view-snippets" class="view">
          <div class="view-header">
            <h2>Code Snippets</h2>
            <span id="snippet-count" class="count-badge">0</span>
          </div>
          
          <div id="snippets-grid" class="snippets-grid">
            <div class="empty-state">
              <p>No code snippets yet. Create your first one!</p>
            </div>
          </div>
        </div>

        <!-- Favourites View (British English) -->
        <div id="view-favourites" class="view">
          <div class="view-header">
            <h2>Favourite Snippets</h2>
            <span id="favourites-count" class="count-badge">0</span>
          </div>
          
          <div id="favourites-grid" class="snippets-grid">
            <div class="empty-state">
              <p>No favourites yet. Star snippets to see them here!</p>
            </div>
          </div>
        </div>

        <!-- Error Logs View -->
        <div id="view-errors" class="view">
          <div class="view-header">
            <h2>Error Logs</h2>
            <span id="errors-count" class="count-badge">0</span>
          </div>
          
          <div id="errors-grid" class="snippets-grid">
            <div class="empty-state">
              <p>No errors logged yet. Document your mistakes to learn faster!</p>
            </div>
          </div>
        </div>

        <!-- Subjects View -->
        <div id="view-subjects" class="view">
          <div class="view-header">
            <h2>Subjects</h2>
            <button id="new-subject-btn" class="btn btn-small">+ Add Subject</button>
          </div>
          
          <div id="subjects-grid" class="subjects-grid">
            <div class="empty-state">
              <p>No subjects created. Add your courses to organise snippets!</p>
            </div>
          </div>
        </div>

        <!-- Import/Export View -->
        <div id="view-import-export" class="view">
          <div class="view-header">
            <h2>Import / Export</h2>
          </div>
          
          <div class="import-export-container">
            <div class="export-section">
              <h3>Export Your Data</h3>
              <p>Download all your snippets, subjects, and settings as a JSON file.</p>
              <button id="export-all-btn" class="btn btn-primary">Export All Data</button>
              <button id="export-selected-btn" class="btn btn-secondary">Export Selected Snippets</button>
            </div>
            
            <hr>
            
            <div class="import-section">
              <h3>Import Data</h3>
              <p>Upload a previously exported JSON file to restore or merge snippets.</p>
              <input type="file" id="import-file-input" accept=".json" style="display: none;">
              <button id="import-btn" class="btn btn-primary">Choose File to Import</button>
              <div id="import-status" class="import-status"></div>
            </div>
          </div>
        </div>

      </section>
    </main>
  </div>

  <!-- Modals (hidden by default, shown when needed) -->
  
  <!-- Snippet Editor Modal -->
  <div id="snippet-modal" class="modal">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h2 id="snippet-modal-title">New Snippet</h2>
        <button class="modal-close">&times;</button>
      </div>
      
      <div class="modal-body">
        <!-- Form will be populated dynamically -->
      </div>
      
      <div class="modal-footer">
        <button id="save-snippet-btn" class="btn btn-primary">Save Snippet</button>
        <button class="btn btn-secondary modal-close">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Settings</h2>
        <button class="modal-close">&times;</button>
      </div>
      
      <div class="modal-body">
        <!-- Settings form will be populated dynamically -->
      </div>
    </div>
  </div>

  <!-- Toast Notifications Container -->
  <div id="toast-container" class="toast-container"></div>

  <!-- Scripts -->
  <script src="./lib/prism.js"></script>
  <script src="./js/db.js"></script>
  <script src="./js/ui.js"></script>
  <script src="./js/search.js"></script>
  <script src="./js/import-export.js"></script>
  <script src="./js/app.js"></script>
  
  <!-- Service Worker Registration -->
  <script>
    // Register service worker for offline support
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then((registration) => {
            console.log('‚úÖ Service Worker registered:', registration.scope);
          })
          .catch((error) => {
            console.error('‚ùå Service Worker registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>